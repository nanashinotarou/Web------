<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ウェブデザイン技能検定3級 模擬試験【ランダム50問】</title>
  <style>
    /* CSSはそのまま流用 */
    :root{
      --bg:#ffffff;
      --card:#f9fafb;
      --accent:#2563eb;
      --muted:#374151;
      --ok:#16a34a;
      --bad:#ef4444;
      --text:#111827;
    }
    *{box-sizing:border-box}
    body{
      font-family:system-ui,-apple-system,"Hiragino Kaku Gothic ProN","Yu Gothic",Meiryo,Segoe UI,Roboto,Arial;
      background:var(--bg);
      color:var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .card{
      background:var(--card);
      max-width:820px;
      width:100%;
      border-radius:12px;
      padding:24px;
      box-shadow:0 8px 20px rgba(0,0,0,0.1);
    }
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    h1{font-size:20px;margin:0}
    .meta{color:var(--muted);font-size:13px}
    .progress{height:10px;background:#e5e7eb;border-radius:999px;overflow:hidden;margin-top:12px}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),#7c3aed);width:0%}
    .question{margin:18px 0;padding:18px;border-radius:8px;background:#f3f4f6}
    .qnum{font-size:13px;color:var(--muted)}
    .qtext{font-size:18px;margin-top:8px}

    .choices{display:grid;grid-template-columns:1fr;gap:10px;margin-top:14px}
    .choice{padding:12px 14px;border-radius:8px;border:1px solid #d1d5db;background:#ffffff;cursor:pointer;text-align:left;color:var(--text)}
    .choice:hover{transform:translateY(-2px);background:#f9fafb}
    .choice.correct{border-color:var(--ok);background:#dcfce7}
    .choice.wrong{border-color:var(--bad);background:#fee2e2}

    .controls{display:flex;gap:10px;align-items:center;margin-top:18px}
    button.btn{background:var(--accent);color:#fff; padding:10px 14px;border-radius:8px;border:none;cursor:pointer;font-weight:600}
    button.ghost{background:transparent;border:1px solid #d1d5db;color:var(--muted)}

    .result{display:none;padding:18px;margin-top:18px;border-radius:8px;background:#f3f4f6}
    .result.show{display:block}
    .score{font-size:22px;font-weight:700;color:var(--text)}
    .small{font-size:13px;color:var(--muted)}

    @media(min-width:640px){.choices{grid-template-columns:repeat(2,1fr)}}

    footer{margin-top:14px;color:var(--muted);font-size:13px}
  </style>
</head>
<body>
  <main class="card" role="main">
    <header>
      <div>
        <h1>ウェブデザイン技能検定3級 模擬試験【ランダム50問】</h1>
        <div class="meta">全100問からランダムに50問を出題</div>
        <div class="progress" aria-hidden="true"><i id="progBar"></i></div>
      </div>
      <div class="meta" id="status">問題 1 / 50</div>
    </header>

    <section id="quizArea">
      <div class="question">
        <div class="qnum" id="qNum">問題 1</div>
        <div class="qtext" id="qText">読み込み中...</div>
        <div class="choices" id="choices"></div>
      </div>

      <div class="controls">
        <button class="btn" id="nextBtn" disabled>次へ</button>
        <button class="ghost" id="restartBtn">最初から</button>
        <div style="margin-left:auto" class="small" id="feedback"></div>
      </div>
    </section>

    <section class="result" id="resultBox" aria-live="polite">
      <div class="score" id="finalScore">あなたのスコア: 0 / 50</div>
      <div class="small" id="detailText">良いところと、改善ポイントを表示します。</div>
      <div style="margin-top:12px">
        <button class="btn" id="retryBtn">もう一度チャレンジ</button>
        <button class="ghost" id="reviewBtn">解答を確認</button>
      </div>
    </section>

    <footer>作成: ウェブデザイン技能検定3級 模擬試験【学科編】</footer>
  </main>

<script>
// =========================================================
// 問題データ セットA：初期の50問
// =========================================================
const QUESTIONS_SET_A = [
    {q: 'Webサイトの設計において、特定の目的を持つ架空のユーザー像を作成する手法はどれか。', choices: ['ユーザーストーリー', 'ペルソナ', 'ユースケース', 'インフォグラフィック'], a: 1, explain: 'ペルソナは、Webサイトのターゲットとなる典型的なユーザー像を、詳細な属性情報（名前、職業、目標など）を用いて具体化したものです。'},
    {q: 'Webサイトの目標達成度を測る最終的な成果（商品の購入、資料請求など）を指す指標は何か。', choices: ['PV (ページビュー)', 'UU (ユニークユーザー)', 'CV (コンバージョン)', 'LPO (ランディングページ最適化)'], a: 2, explain: 'CV（コンバージョン）は、サイト訪問者が、サイト運営者が最終的に期待する行動（購入、登録など）を取った状態を指します。'},
    {q: '色の三属性である「色相」「明度」「彩度」のうち、**色の明るさ**を示す属性はどれか。', choices: ['色相', '明度', '彩度', 'トーン'], a: 1, explain: '明度（Value/Brightness）は色の明るさの度合いを示し、彩度（Saturation）は色の鮮やかさを示します。'},
    {q: 'Webサイトのディスプレイ表示で主に使われる、光の三原色（赤、緑、青）で色を表現するモデルはどれか。', choices: ['CMYKモデル', 'HSVモデル', 'RGBモデル', 'DICカラー'], a: 2, explain: 'RGB（Red, Green, Blue）モデルは、加法混色で、Webやモニタ表示の基本です。'},
    {q: 'HTMLの文書構造において、ルートとなる最も外側の要素はどれか。', choices: ['`<head>`', '`<body>`', '`<html>`', '`<main>`'], a: 2, explain: '`<html>`要素は、HTML文書全体のルート要素であり、すべての要素を内包します。'},
    {q: '外部のCSSファイルをHTML文書に読み込む際に、`<head>`要素内に記述する要素はどれか。', choices: ['`<style>`', '`<script>`', '`<link>`', '`<meta>`'], a: 2, explain: '`<link>`要素を`rel="stylesheet"`属性とともに使用することで、外部CSSファイルを読み込みます。'},
    {q: 'HTMLで、**見出し**を示すために使用される要素のうち、最も重要な大見出しを表す要素はどれか。', choices: ['`<h2>`', '`<h1>`', '`<h3>`', '`<header>`'], a: 1, explain: '`<h1>`は、Webページまたはセクションの主要な見出しを示し、文書内で最も重要です。'},
    {q: '画像が表示できない環境や、視覚障碍者向けに画像の内容を伝えるために`<img>`要素に必ず記述すべき属性はどれか。', choices: ['`title`', '`src`', '`alt`', '`data`'], a: 2, explain: '`alt`属性（代替テキスト）は、画像の内容を簡潔に説明するために使用されます。'},
    {q: 'HTMLフォームで、入力されたデータをサーバーに送信するために`<input>`要素に設定する`type`属性の値はどれか。', choices: ['`type="text"`', '`type="button"`', '`type="submit"`', '`type="reset"`'], a: 2, explain: '`type="submit"`が、フォームデータを処理するサーバーへ送信するボタンを生成します。'},
    {q: 'CSSで、ブロック要素の**内側**、コンテンツと境界線（`border`）の間に空けるスペースを指定するプロパティはどれか。', choices: ['`margin`', '`padding`', '`width`', '`outline`'], a: 1, explain: '`padding`は、要素の内容（コンテンツ）と枠線（ボーダー）の間の内側の余白です。'},
    {q: 'CSSで、特定の要素に**一意のスタイル**を適用するために使用するセレクタの記法はどれか。', choices: ['`.name`', '`#name`', '`name`', '`[name]`'], a: 1, explain: 'IDセレクタは、要素名の前にシャープ（`#`）を付けて記述します。'},
    {q: 'Webページに箇条書きのリスト（順序なしリスト）を作成するために使用する要素はどれか。', choices: ['`<ol>`', '`<ul>`', '`<li>`', '`<dl>`'], a: 1, explain: '`<ul>`（Unordered List）要素は、順序のないリストを定義します。'},
    {q: 'HTML5の文書であることをブラウザに宣言するための、文書の冒頭に記述するタグはどれか。', choices: ['`<doctype html>`', '`<!DOCTYPE html>`', '`<meta charset="utf-8">`', '`<html>`'], a: 1, explain: '`<!DOCTYPE html>`は、HTML5文書であることを宣言するDTD（文書型宣言）です。'},
    {q: 'リンクを新しいウィンドウ（またはタブ）で開くように指定する`<a>`要素の`target`属性の値はどれか。', choices: ['`_self`', '`_parent`', '`_top`', '`_blank`'], a: 3, explain: '`target="_blank"`は、リンク先のコンテンツを新しい閲覧コンテキスト（ウィンドウまたはタブ）で開くように指定します。'},
    {q: 'Webサイトの画像形式のうち、**透過性（アルファチャンネル）**に対応しており、**可逆圧縮**を用いるロゴやイラストに適した形式はどれか。', choices: ['JPEG', 'GIF', 'PNG', 'WebP'], a: 2, explain: 'PNG（Portable Network Graphics）は、透過性と可逆圧縮に優れています。'},
    {q: '画面のサイズに応じてレイアウトを切り替えるレスポンシブWebデザインの核となるCSS技術は何か。', choices: ['Flexbox', 'Grid System', 'Media Query', 'Float'], a: 2, explain: 'メディアクエリ（Media Query）は、画面の幅や解像度といったメディアの特性に応じてスタイルを適用する技術です。'},
    {q: 'Webサイトの制作において、クライアントの承認を得るために本番環境とほぼ同じ構成で用意される検証環境を何と呼ぶか。', choices: ['開発環境', 'ローカル環境', 'ステージング環境', '本番環境'], a: 2, explain: 'ステージング環境（Staging Environment）は、本番環境への移行前に最終テストを行うための環境です。'},
    {q: '電子メールの送信に用いられるインターネットプロトコルはどれか。', choices: ['POP3', 'IMAP', 'SMTP', 'FTP'], a: 2, explain: 'SMTP（Simple Mail Transfer Protocol）は、メールを送信するために用いられるプロトコルです。'},
    {q: 'Webサーバーとクライアント（ブラウザ）間でファイルを転送するために広く利用されているプロトコルはどれか。', choices: ['HTTP', 'SMTP', 'POP3', 'FTP'], a: 3, explain: 'FTP（File Transfer Protocol）は、Webサイトのアップロード・ダウンロードに用いられます。'},
    {q: 'Webサイトのドメイン名（例: example.com）をIPアドレスに変換する（名前解決を行う）インターネットの仕組みはどれか。', choices: ['HTTP', 'FTP', 'DNS', 'TCP'], a: 2, explain: 'DNS（Domain Name System）は、ドメイン名とIPアドレスを対応付けるシステムです。'},
    {q: '著作権の保護対象となるのは、どのようなものか。', choices: ['アイデアや概念', '事実やデータ', '表現された創作物', 'ソフトウェアの操作方法'], a: 2, explain: '著作権は、「思想又は感情を創作的に表現したもの」である著作物のみを保護対象とします。'},
    {q: '著作権法において、他人の著作物を「引用」として利用するために満たす必要のない要件はどれか。', choices: ['出所を明示すること', '引用部分と主たる自分の部分が明確に区別されていること', '自分の著作物が主であり、引用が従の関係にあること', '事前に著作権者の許可を得ること'], a: 3, explain: '公正な慣行に合致し、目的上正当な範囲であれば、事前に著作権者の許可を得る必要はありません。'},
    {q: 'インターネットを利用した通信販売を行う事業者に、氏名や連絡先などの表示を義務付けている法律はどれか。', choices: ['個人情報保護法', '特定商取引法', '景品表示法', '不正競争防止法'], a: 1, explain: '特定商取引法は、消費者トラブルを防ぐために、通信販売業者などに適切な情報開示を義務付けています。'},
    {q: 'CSSで要素の境界線（ボーダー）の外側、他の要素との間に空ける余白を指定するプロパティはどれか。', choices: ['`padding`', '`margin`', '`border`', '`outline`'], a: 1, explain: '`margin`は、要素の境界線の外側の余白（外側の余白）を指定します。'},
    {q: 'CSSのセレクタで、**複数のクラス**（例：`<div class="box large">`）の両方を持つ要素にスタイルを適用する記法はどれか。', choices: ['`.box .large`', '`.box, .large`', '`.box.large`', '`div > .box`'], a: 2, explain: 'スペースを入れずにクラス名を連結すると、両方のクラスを持つ要素に適用されます。'},
    {q: 'CSSで、要素を非表示にするプロパティと値の組み合わせのうち、**要素が占めていた空間も完全に取り除く**ものはどれか。', choices: ['`visibility: hidden;`', '`opacity: 0;`', '`display: none;`', '`z-index: -1;`'], a: 2, explain: '`display: none;`は、要素を非表示にし、レンダリングツリーからも取り除くため、空間もなくなります。'},
    {q: 'Webサイトの訪問者が、最初のページだけを見て、他のページに移動せずにサイトを離脱する割合を示す指標は何か。', choices: ['離脱率', '直帰率', 'コンバージョン率', '回遊率'], a: 1, explain: '直帰率（Bounce Rate）は、1ページだけを閲覧してサイトを離れたセッションの割合です。'},
    {q: 'Webサイトのパフォーマンス向上を目的として、一度アクセスしたWebページの静的ファイル（画像など）をブラウザに一時的に保存させておく仕組みは何か。', choices: ['Cookie', 'セッション', 'キャッシュ', '履歴'], a: 2, explain: 'キャッシュは、再訪問時のページの読み込み速度を高速化するために使用されます。'},
    {q: 'Webサーバーが「ページが見つからない」ことをブラウザに伝えるHTTPステータスコードはどれか。', choices: ['200 OK', '301 Moved Permanently', '404 Not Found', '500 Internal Server Error'], a: 2, explain: '404エラーは、リクエストされたリソース（ページやファイル）がサーバーに見つからないことを示します。'},
    {q: 'Webサイトの制作工程において、コンテンツの配置や動線など、サイトの骨格を定義するシンプルな設計図を何というか。', choices: ['モックアップ', 'サイトマップ', 'ワイヤーフレーム', 'プロトタイプ'], a: 2, explain: 'ワイヤーフレーム（Wireframe）は、レイアウトや情報配置に焦点を当てた、視覚情報が少ない設計図です。'},
    {q: 'HTMLフォームで、ユーザーに複数行のテキストを入力させるために使用する要素はどれか。', choices: ['`<input type="text">`', '`<textarea>`', '`<select>`', '`<datalist>`'], a: 1, explain: '`<textarea>`要素は、複数行の自由なテキスト入力を受け付けます。'},
    {q: 'HTMLのフォーム要素と説明文を関連付け、アクセシビリティを向上させる要素はどれか。', choices: ['`<p>`', '`<legend>`', '`<label>`', '`<mark>`'], a: 2, explain: '`<label>`要素を使用することで、フォーム部品（`<input>`など）と説明文（ラベル）が結びつけられます。'},
    {q: 'Webデザインにおけるユニバーサルデザインの原則のうち、「情報やUIコンポーネントが、ユーザーが利用できる感覚器官で認識できること」を指す原則はどれか。', choices: ['知覚可能', '操作可能', '理解可能', '堅牢'], a: 0, explain: '知覚可能（Perceivable）は、情報を視覚、聴覚、または触覚などでユーザーが受け取れることを意味します。'},
    {q: 'CSSで、要素にマウスカーソルを合わせたときのスタイルを指定する擬似クラスはどれか。', choices: ['`:focus`', '`:active`', '`:visited`', '`:hover`'], a: 3, explain: '`:hover`擬似クラスは、ユーザーがポインティングデバイス（マウスなど）で要素をポイントしている状態に適用されます。'},
    {q: 'CSSにおいて、テキストの行と行の間のスペース（行間）を設定するプロパティはどれか。', choices: ['`text-spacing`', '`line-height`', '`font-space`', '`letter-spacing`'], a: 1, explain: '`line-height`プロパティは、行の高さを指定し、行間を調整します。'},
    {q: 'HTMLで、文章中の**特に重要なテキスト**を強調するために使用するセマンティック要素はどれか。', choices: ['`<b>`', '`<i>`', '`<strong>`', '`<mark>`'], a: 2, explain: '`<strong>`要素は、その内容が重要であること（重要性、深刻性など）を意味的に示します。'},
    {q: 'CSSで要素を中央揃えにするために、ブロックレベル要素に設定するプロパティと値の組み合わせはどれか。', choices: ['`text-align: center;`', '`margin: 0 auto;`', '`align-items: center;`', '`position: center;`'], a: 1, explain: 'ブロック要素を水平方向に中央揃えにするには、`margin: 0 auto;`（左右のマージンを自動調整）を設定します。'},
    {q: 'Webサイトの配色において、色相環で隣接する色（類似色）を組み合わせる配色方法を何というか。', choices: ['補色配色', 'トライアド配色', 'グラデーション配色', 'アナロジー配色'], a: 3, explain: 'アナロジー配色（類似色相配色）は、色相環で隣り合う色を使用し、調和の取れた配色になります。'},
    {q: 'HTML5で、Webページのフッター（著作権情報、連絡先など）を示すために使用される要素はどれか。', choices: ['`<section>`', '`<nav>`', '`<footer>`', '`<details>`'], a: 2, explain: '`<footer>`要素は、最も近いセクショニングコンテンツ（ページ全体または`<section>`など）のフッターを示します。'},
    {q: 'CSSで、要素を他の要素の上に重ねて表示する際の重なり順（Z軸方向）を指定するプロパティはどれか。', choices: ['`opacity`', '`display`', '`z-index`', '`position`'], a: 2, explain: '`z-index`プロパティは、`position`プロパティが`static`以外の場合に、要素の重なり順序を指定します。'},
    {q: 'Webサイトで使用される画像形式のうち、**ベクター画像**であり、拡大・縮小しても画質が劣化しない特徴を持つものはどれか。', choices: ['JPEG', 'PNG', 'GIF', 'SVG'], a: 3, explain: 'SVG（Scalable Vector Graphics）は、XML形式で記述されたベクター画像です。'},
    {q: 'Webサイトのテスト手法の一つで、特定のユーザー層を設定し、実際にサイトを使ってもらい、その行動を観察・評価する手法は何か。', choices: ['A/Bテスト', 'ユーザビリティテスト', 'ヒューリスティック評価', 'データマイニング'], a: 1, explain: 'ユーザビリティテストは、実際のユーザーがタスクを達成できるか、使い勝手を評価する手法です。'},
    {q: 'CSSの`position`プロパティの値のうち、要素を**ウィンドウ（ビューポート）の特定の位置**に固定し、スクロールしても動かないようにする値はどれか。', choices: ['`static`', '`relative`', '`absolute`', '`fixed`'], a: 3, explain: '`position: fixed;`は、要素をビューポート（画面）を基準に固定します。'},
    {q: 'HTMLで、表（テーブル）の各セルを定義する要素はどれか。', choices: ['`<tr>`', '`<th>`', '`<tbody>`', '`<td>`'], a: 3, explain: '`<td>`要素は、表の標準的なデータセル（Table Data）を定義します。'},
    {q: 'HTML文書の文字コードとして推奨されており、世界中のほとんどの文字を扱えるエンコーディング方式はどれか。', choices: ['Shift_JIS', 'EUC-JP', 'ASCII', 'UTF-8'], a: 3, explain: 'UTF-8はUnicodeの符号化方式の一つで、Web上の標準として広く利用されています。'},
    {q: 'Webサイトの制作において、著作権は**いつ**発生するか。', choices: ['著作権庁に登録したとき', 'コンテンツを公開したとき', 'コンテンツを創作したとき', '著作者が署名をしたとき'], a: 2, explain: '著作権は、著作物を創作した時点（無方式主義）で自動的に発生します。'},
    {q: 'Webサイトのデザインで、**文字のストロークの端に飾りのない**、日本語のゴシック体に近い書体はどれか。', choices: ['セリフ体', 'サンセリフ体', '明朝体', '草書体'], a: 1, explain: 'サンセリフ体（Sans-serif）は、セリフ（飾り）がない書体で、Web上の本文などによく使われます。'},
    {q: 'Webサーバーがリクエストを受け取った際、「ページが恒久的に別のURLへ移動した」ことをブラウザに伝えるHTTPステータスコードはどれか。', choices: ['200 OK', '404 Not Found', '301 Moved Permanently', '500 Internal Server Error'], a: 2, explain: '301は恒久的な転送（リダイレクト）を示し、検索エンジンに対してもURLの変更を伝えます。'},
];

// =========================================================
// 問題データ セットB：追加の50問（前回提供したもの）
// =========================================================
const QUESTIONS_SET_B = [
    {q: 'Webコンテンツの企画において、高齢者や障がい者を含む多様な人々がWebサイトを利用できるように配慮する概念を何というか。', choices: ['ユーザビリティ', 'インフォマティクス', 'アクセシビリティ', 'リテラシー'], a: 2, explain: 'アクセシビリティ（Web Accessibility）は、障害の有無や年齢、利用環境に関わらず、誰もがWebサイトにアクセスし、利用できることを意味します。'},
    {q: '特定のウェブサイトが**著作権法**の保護対象となるのは、どのような条件を満たしている場合か。', choices: ['公開日から10年以上経過している', '著作権登録を済ませている', '著作者の思想または感情を創作的に表現したもの', 'Webサイトの規模が10ページ以上である'], a: 2, explain: '著作権法において、著作物は「思想又は感情を創作的に表現したものであって、文芸、学術、美術又は音楽の範囲に属するもの」と定義されています。'},
    {q: 'CSSで、レイアウトを組む際に要素を**横並び**にするために最もよく用いられる`display`プロパティの値は、現在主流となっているものを除くとどれか。', choices: ['`block`', '`inline`', '`inline-block`', '`none`'], a: 2, explain: '幅と高さを指定しつつ、要素を横並びにできる`inline-block`が、過去にレイアウトによく用いられました。'},
    {q: '「インターネットを利用した通信販売」を行う事業者が、ウェブサイト上に必ず表示しなければならない項目を定めている日本の法律はどれか。', choices: ['個人情報保護法', '特定商取引法', '景品表示法', '不正アクセス禁止法'], a: 1, explain: '特定商取引法は、通信販売事業者に対して、氏名、住所、連絡先、販売価格などを明記することを義務付けています。'},
    {q: 'Webサイトの**サーバー証明書**と、ブラウザとサーバー間の**通信暗号化**を実現するプロトコルはどれか。', choices: ['FTP', 'HTTP', 'SMTP', 'HTTPS'], a: 3, explain: 'HTTPSはHTTP通信をSSL/TLSで暗号化したもので、サーバー証明書（TLS証明書）を利用します。'},
    {q: 'Webサイトの**情報構造**を設計する専門分野であり、コンテンツをわかりやすく分類・整理・配置する活動を何というか。', choices: ['SEO (Search Engine Optimization)', 'LPO (Landing Page Optimization)', 'IA (Information Architecture)', 'UI (User Interface)'], a: 2, explain: 'IA（情報アーキテクチャ）は、Webサイトやアプリなどの情報構造を設計し、ユーザーが目的の情報に容易に辿り着けるようにする活動です。'},
    {q: '写真やグラデーションなどの**色数の多い画像**に適しており、**非可逆圧縮**を用いる画像形式はどれか。', choices: ['PNG', 'GIF', 'SVG', 'JPEG'], a: 3, explain: 'JPEG（Joint Photographic Experts Group）は、非可逆圧縮を用いて高い圧縮率を実現するため、色数の多い写真に最適です。'},
    {q: 'HTML5で、Webページの**主要なコンテンツ**を示すために使用されるセマンティック要素はどれか。', choices: ['`<section>`', '`<article>`', '`<main>`', '`<div>`'], a: 2, explain: '`<main>`要素は、文書のbody内にある主要なコンテンツをマークアップするために使用され、文書内で一つだけ使用すべき要素です。'},
    {q: 'CSSにおいて、要素の**外側**に空ける余白を設定するプロパティはどれか。', choices: ['`padding`', '`border`', '`margin`', '`outline`'], a: 2, explain: '`margin`は要素の境界線の外側（他の要素との間）に空ける余白を設定します。'},
    {q: 'Webサイトの**コンテンツの鮮度**を示す指標の一つで、公開から経過した時間によって情報価値が薄れていく現象を何というか。', choices: ['ドメインエイジ', 'キュレーション', 'コンテンツマイグレーション', '情報の半減期 (Half-life of information)'], a: 3, explain: '情報の半減期は、情報がその価値の半分を失うまでに要する時間を指し、コンテンツの鮮度を表す指標の一つです。'},
    {q: 'Webマーケティングにおいて、ユーザーが最初に訪問するページ（広告の飛び先など）を最適化することを何というか。', choices: ['SEM (Search Engine Marketing)', 'LPO (Landing Page Optimization)', 'EFO (Entry Form Optimization)', 'CTA (Call To Action)'], a: 1, explain: 'LPOは、ランディングページ（Landing Page: ユーザーが最初に訪れるページ）の離脱率を下げるなど、最適化を行う活動です。'},
    {q: 'HTML文書の文字コードとして推奨されており、絵文字などを含む**あらゆる文字**を表現できるエンコーディング方式はどれか。', choices: ['Shift_JIS', 'EUC-JP', 'ASCII', 'UTF-8'], a: 3, explain: 'UTF-8はUnicodeの符号化方式の一つで、世界中のほとんどの文字を表現でき、現在のWebの標準です。'},
    {q: 'Webサイトの配色において、**「色相」「明度」「彩度」**の3つの要素を用いて色を表現するモデルを何というか。', choices: ['RGBモデル', 'CMYKモデル', 'HSV/HSBモデル', 'CIEモデル'], a: 2, explain: 'HSV（Hue, Saturation, Value）またはHSB（Hue, Saturation, Brightness）は、色相、彩度、明度（輝度）で色を表現するモデルです。'},
    {q: 'ユーザーがWebサイトを訪問してから離脱するまでの間に閲覧したページ数を、総アクセス数で割って算出する指標はどれか。', choices: ['UU (ユニークユーザー数)', 'PV (ページビュー数)', 'セッション数', '平均ページビュー（PV/セッション）'], a: 3, explain: '総PV数をセッション数（訪問回数）で割ることで、一回の訪問あたりの平均閲覧ページ数を算出します。'},
    {q: 'Webサイトのドメイン名とIPアドレスを結びつける（名前解決を行う）インターネットの仕組みは何か。', choices: ['HTTP', 'FTP', 'DNS', 'TCP/IP'], a: 2, explain: 'DNS（Domain Name System）は、ドメイン名（例: example.com）をコンピュータが認識できるIPアドレスに変換するシステムです。'},
    {q: 'HTML5の規格策定をW3Cと共同で行い、特にHTMLとDOMの仕様策定を推進しているコミュニティはどこか。', choices: ['IETF (Internet Engineering Task Force)', 'ISO (International Organization for Standardization)', 'WHATWG (Web Hypertext Application Technology Working Group)', 'Mozilla Foundation'], a: 2, explain: 'WHATWGは、ブラウザベンダーが中心となってHTML5やDOM Living Standardなどの仕様策定を継続的に行っているコミュニティです。'},
    {q: 'ウェブサイトの**ユニバーサルデザイン**において、色が識別しにくい人々のために、文字と背景のコントラストを十分に確保することは、3つの原則のうちどれに該当するか。', choices: ['知覚可能（Perceivable）', '操作可能（Operable）', '理解可能（Understandable）', '堅牢（Robust）'], a: 0, explain: '知覚可能とは、情報やUIコンポーネントが、ユーザーが利用できる感覚器官で認識できることを意味します。コントラストの確保は視覚で知覚するための必須要件です。'},
    {q: 'CSSの`@media`ルールを使用して、画面の幅に応じてレイアウトを変更するレスポンシブWebデザインの手法を何というか。', choices: ['Fixed Layout', 'Fluid Layout', 'Media Query', 'Adaptive Design'], a: 2, explain: '`@media`ルール自体をメディアクエリと呼び、レスポンシブデザインの核となる技術です。'},
    {q: '企業のWebサイトにおいて、サイトの信頼性を高め、ユーザーに安心感を与えるために、運営者情報、プライバシーポリシー、利用規約などをまとめたページを置くべき場所はどこか。', choices: ['Webサイトのトップページのみ', 'すべてのページの最下部（フッター）からリンクさせる', 'サイトマップのみ', 'お問い合わせフォームと同じページ'], a: 1, explain: 'フッターはページを問わず常に表示されるため、これらの重要情報へのリンクを配置するのに最も適切な場所とされています。'},
    {q: 'Webサイトのセキュリティにおいて、多数のコンピュータから一斉にWebサーバーにアクセスを集中させ、サービスを機能停止に追い込む攻撃手法はどれか。', choices: ['フィッシング', 'DoS/DDoS攻撃', 'SQLインジェクション', 'クロスサイトスクリプティング (XSS)'], a: 1, explain: 'DoS（Denial of Service）/DDoS（Distributed DoS）攻撃は、サーバーに過負荷を与え、サービス提供を妨害する行為です。'},
    {q: 'ユーザーのブラウザに保存され、ログイン状態の維持やショッピングカートの内容記憶などに利用されるデータは何か。', choices: ['キャッシュ', 'Cookie', 'セッション', '履歴'], a: 1, explain: 'Cookie（クッキー）は、Webサーバーがユーザーのブラウザに送信し、保存させる小さなデータファイルです。セッション管理や状態保持に利用されます。'},
    {q: 'CSSで、フォントサイズを**ルート要素**（`<html>`タグ）のフォントサイズを基準にして指定する相対単位はどれか。', choices: ['`em`', '`px`', '`rem`', '`%`'], a: 2, explain: '`rem`（root em）は、HTMLのルート要素（`<html>`）のフォントサイズを基準とするため、一元管理しやすい相対単位です。'},
    {q: 'ウェブサイト制作の工程で、コンテンツの配置や動線を定義するために作成される、シンプルな設計図は何か。', choices: ['ワイヤーフレーム', 'モックアップ', 'プロトタイプ', 'サイトマップ'], a: 0, explain: 'ワイヤーフレームは、Webサイトのレイアウト、要素の配置、ナビゲーションといった骨格（ワイヤー）を示す設計図です。'},
    {q: '動画ファイル形式の一つで、**Google**が開発したオープンソースの形式であり、Web上での利用が推奨されているものはどれか。', choices: ['MP4', 'WMV', 'WebM', 'MOV'], a: 2, explain: 'WebMはGoogleが開発したオープンな動画形式であり、HTML5の`<video>`要素での利用が推奨されています。'},
    {q: 'ブラウザにHTML文書を読み込ませる際に、文書の先頭に記述すべき、HTML5の文書タイプ宣言（DTD）はどれか。', choices: ['`<DOCTYPE html>`', '`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">`', '`<!DOCTYPE html>`', '`<html>`'], a: 2, explain: 'HTML5の文書タイプ宣言の正しい記述です。大文字・小文字は区別されません。'},
    {q: 'CSSで、Webフォントなど**外部のフォントファイル**を読み込む際に使用するルールはどれか。', choices: ['`@import`', '`@font-face`', '`@media`', '`@charset`'], a: 1, explain: '`@font-face`ルールは、Webフォントファイルを指定し、CSS内で使用できるように定義します。'},
    {q: 'Webサイトの色彩設計において、**色相環**で正反対の位置にある色を組み合わせる配色方法を何というか。', choices: ['ドミナントカラー', 'アナロジー配色（類似色相）', 'コンプレメンタリー配色（補色）', 'トーンオントーン'], a: 2, explain: '補色（Complementary Color）は色相環の正反対の色であり、組み合わせると強いコントラストとインパクトが生まれます。'},
    {q: 'HTMLフォームにおいて、ユーザーに**複数の選択肢**を選ばせるために使用する`<input>`要素の`type`属性の値はどれか。', choices: ['`radio`', '`submit`', '`checkbox`', '`select`'], a: 2, explain: '`checkbox`は、複数ある選択肢の中から、複数または一つも選択しない自由な選択を可能にするものです。'},
    {q: 'CSSにおいて、要素を**コンテンツの大きさや配置に合わせて柔軟に伸縮**させるためのレイアウトシステムはどれか。', choices: ['Table Layout', 'Position Absolute', 'Flexbox', 'Float Clearfix'], a: 2, explain: 'Flexbox（Flexible Box Layout）は、主に一方向（行または列）に沿って要素を配置し、伸縮や間隔調整を簡単に行えるシステムです。'},
    {q: 'Webサイトの公開前に、HTMLやCSSの記述がW3Cなどの**標準規格に準拠しているか**をチェックするために使用するツールは何か。', choices: ['サイトマップジェネレーター', 'バリデーター', 'Lighthouse', 'FTPクライアント'], a: 1, explain: 'バリデーター（Validator）は、HTMLやCSSのコードが文法的に正しく、Web標準に準拠しているかを検証するツールです。'},
    {q: 'インターネット通信の基本構造を定めている、複数のプロトコル群の総称はどれか。', choices: ['HTTP', 'SMTP', 'TCP/IP', 'FTP'], a: 2, explain: 'TCP/IPは、インターネット通信の基盤をなす、複数のプロトコル（Transmission Control Protocol / Internet Protocol）の集合体です。'},
    {q: 'CSSにおいて、要素の重なり順序（Z軸方向）を指定する際に使用するプロパティはどれか。', choices: ['`z-value`', '`z-index`', '`position`', '`layer`'], a: 1, explain: '`z-index`プロパティは、`position`プロパティの値が`static`以外に設定されている要素の重なり順序を指定します。値が大きいほど手前に表示されます。'},
    {q: 'Webサイトのレイアウトで、本文から独立した、補足情報や広告などのサイドバーコンテンツを示すために使用されるHTML5要素はどれか。', choices: ['`<section>`', '`<article>`', '`<aside>`', '`<footer>`'], a: 2, explain: '`<aside>`要素は、メインコンテンツと関連するものの、独立したセクションであり、補足情報（サイドバー）などに用いられます。'},
    {q: 'WebブラウザがWebサーバーに対してWebページのデータを要求する際に用いるプロトコルはどれか。', choices: ['DNS', 'HTTP', 'DHCP', 'ARP'], a: 1, explain: 'HTTP（HyperText Transfer Protocol）は、Webクライアント（ブラウザ）とWebサーバー間でWebコンテンツを送受信するために用いられるプロトコルです。'},
    {q: 'Webサイトのアクセス解析において、ユーザーがページを読み込んだ後、**何も操作せずにそのページを離脱した割合**を示す指標はどれか。', choices: ['CVR (コンバージョン率)', '回遊率', '離脱率', '直帰率'], a: 3, explain: '直帰率（Bounce Rate）は、ユーザーが最初のページだけを見て、サイト内の他のページを閲覧せずにセッションを終了した割合です。'},
    {q: 'HTMLで、画像に**キャプション（説明文）**を付けるために、`<img>`要素を囲むべき要素の組み合わせとして最も適切なものはどれか。', choices: ['`<div>`と`<span>`', '`<figure>`と`<figcaption>`', '`<section>`と`<p>`', '`<a>`と`<title>`'], a: 1, explain: '`<figure>`要素は図表を囲み、`<figcaption>`要素はそれに対するキャプションを提供します。'},
    {q: 'Webサイトの配色において、光の三原色（R:赤、G:緑、B:青）を混ぜて色を表現するモデルを何というか。', choices: ['CMYKモデル', 'HSV/HSBモデル', 'RGBモデル', 'NCSモデル'], a: 2, explain: 'RGBモデルは、Webサイトのディスプレイ表示の基本となる、光の三原色を混ぜ合わせる加法混色モデルです。'},
    {q: 'Webサイトのパフォーマンス向上を目的として、ブラウザが一度アクセスしたWebページの画像ファイルなどを保存しておく仕組みは何か。', choices: ['Cookie', 'キャッシュ', 'セッション', '履歴'], a: 1, explain: 'キャッシュは、Webサイトのデータを一時的に保存しておき、再アクセス時の表示速度を向上させるための仕組みです。'},
    {q: 'Webサイトのテスト手法の一つで、**二つの異なるデザイン（AとB）**を同時に公開し、どちらがより高い効果（コンバージョンなど）を得られるかを検証する手法は何か。', choices: ['ユーザビリティテスト', 'ヒューリスティック評価', 'ペルソナ分析', 'A/Bテスト'], a: 3, explain: 'A/Bテストは、複数のバージョンを比較し、より良い結果をもたらすデザインやコンテンツを特定する手法です。'},
    {q: 'Webフォントとして利用される主なファイル形式のうち、Web用途に最適化されており、ファイルサイズが小さく、読み込み速度に優れている形式はどれか。', choices: ['TTF', 'OTF', 'WOFF', 'EOT'], a: 2, explain: 'WOFF（Web Open Font Format）はWebでの使用のために特別に設計された、圧縮されたフォント形式で、現在最も推奨されています。'},
    {q: 'CSSでスタイルを適用する際の**「詳細度（Specificity）」**において、IDセレクタ（例：`#main`）とクラスセレクタ（例：`.box`）を比較した場合、優先順位が高いのはどちらか。', choices: ['IDセレクタ', 'クラスセレクタ', '同じ優先順位である', 'スタイルシートの記述順による'], a: 0, explain: 'CSSの詳細度は「ID > クラス > 要素」の順で高くなります。IDセレクタが最も優先されます。'},
    {q: 'Webサイトの閲覧者が、入力フォームなどに誤って個人情報を入力しないように配慮するなど、**個人情報の取り扱いに関するルール**を定めた日本の法律はどれか。', choices: ['特定商取引法', '景品表示法', '個人情報保護法', '不正競争防止法'], a: 2, explain: '個人情報保護法は、個人情報を取り扱う事業者の義務等を定める法律です。'},
    {q: 'Webサーバーがリクエストを受け取った際、**「ページが恒久的に別のURLへ移動した」**ことをブラウザに伝えるHTTPステータスコードはどれか。', choices: ['200 OK', '404 Not Found', '301 Moved Permanently', '500 Internal Server Error'], a: 2, explain: '301は恒久的な転送（リダイレクト）を示し、検索エンジンに対してもURLの変更を伝えます。'},
    {q: 'Webサイトで使用するフォントの分類で、**文字のストロークの端に装飾（セリフ）**がある書体はどれか。', choices: ['ゴシック体', 'サンセリフ体', 'セリフ体', '明朝体'], a: 2, explain: 'セリフ体（Serif）は、欧文書体において文字の端に「ひげ」や「飾り」がある書体です。日本語の明朝体はセリフ体に分類されます。'},
    {q: 'ウェブサイトの企画・制作・運用のガイドラインを策定し、Web技術の標準化を主導している国際的な非営利団体はどこか。', choices: ['IETF', 'W3C', 'ICANN', 'ISO'], a: 1, explain: 'W3C（World Wide Web Consortium）は、HTML、CSSなどのWeb技術の仕様（標準）を策定・勧告している組織です。'},
    {q: 'Webサーバーにファイルをアップロードしたり、ダウンロードしたりする際に利用されるファイル転送プロトコルはどれか。', choices: ['HTTP', 'SMTP', 'POP3', 'FTP'], a: 3, explain: 'FTP（File Transfer Protocol）は、クライアントとサーバー間でファイルを転送するために広く利用されています。'},
    {q: 'Webサイトの画像を、ピクセル数ではなく、**XML形式のテキスト**で定義し、拡大・縮小しても劣化しない特徴を持つ画像形式はどれか。', choices: ['JPEG', 'PNG', 'GIF', 'SVG'], a: 3, explain: 'SVG（Scalable Vector Graphics）は、ベクター形式であり、Web上でのアイコンやロゴなどに適しています。'},
    {q: 'HTMLの`<head>`要素内に記述するメタ情報で、スマートフォンなどのモバイル端末でWebサイトを表示する際の**表示領域（ビューポート）の幅やスケール**を指定するタグはどれか。', choices: ['`<meta name="author">`', '`<meta name="keywords">`', '`<meta name="viewport" content="...">`', '`<meta name="generator">`'], a: 2, explain: '`<meta name="viewport">`タグは、レスポンシブWebデザインにおいて、端末の画面サイズに合わせて適切に表示させるために必須です。'},
    {q: '企業のウェブサイトにおいて、**サイト全体の構成や階層構造**を分かりやすく図示したもので、ユーザーのナビゲーションやSEO対策にも役立つ文書は何か。', choices: ['ワイヤーフレーム', 'サイトマップ', 'ユーザーストーリー', 'ペルソナ'], a: 1, explain: 'サイトマップは、ウェブサイトのページ間の関係性を示す図であり、通常、HTML版と検索エンジン用のXML版の両方が作成されます。'},
    {q: 'Webサイトを構成する際に、ユーザーに直接公開するサーバーとは別に、ソースコードやリソースを管理・開発するための環境を何と呼ぶか。', choices: ['本番環境（Production）', 'ステージング環境（Staging）', 'テスト環境（Test）', 'ローカル環境（Local）'], a: 1, explain: 'ステージング環境は、本番公開直前の最終確認やクライアントの承認のために用意される、本番とほぼ同じ構成の環境です。'},
    {q: 'CSSのプロパティで、要素の背景を固定し、スクロールしても動かないようにする設定はどれか。', choices: ['`background-attachment: scroll;`', '`background-repeat: no-repeat;`', '`background-position: center;`', '`background-attachment: fixed;`'], a: 3, explain: '`background-attachment: fixed;`を設定することで、背景画像がビューポートに固定され、コンテンツがスクロールしても動きません。'},
];


// =========================================================
// クイズロジック（シャッフル＆ランダム選択機能を追加）
// =========================================================
let idx = 0;
let score = 0;
let answered = false;

// Fisher-Yates (Knuth) Shuffleアルゴリズム
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

// 1. 全100問を統合
const ALL_QUESTIONS = [...QUESTIONS_SET_A, ...QUESTIONS_SET_B];

// 2. 統合した問題プール（100問）をランダムにシャッフル
shuffleArray(ALL_QUESTIONS);

// 3. シャッフルした問題プールから、最初の50問だけを今回のテスト問題として採用
const QUESTIONS = ALL_QUESTIONS.slice(0, 50);

const total = QUESTIONS.length; // 常に50問

const qText = document.getElementById('qText');
const qNum = document.getElementById('qNum');
const choicesEl = document.getElementById('choices');
const nextBtn = document.getElementById('nextBtn');
const restartBtn = document.getElementById('restartBtn');
const status = document.getElementById('status');
const progBar = document.getElementById('progBar');
const feedback = document.getElementById('feedback');
const resultBox = document.getElementById('resultBox');
const finalScore = document.getElementById('finalScore');
const detailText = document.getElementById('detailText');
const retryBtn = document.getElementById('retryBtn');
const reviewBtn = document.getElementById('reviewBtn');

function renderQuestion() {
  const item = QUESTIONS[idx];
  qNum.textContent = `問題 ${idx+1}`;
  qText.textContent = item.q;
  choicesEl.innerHTML = '';
  item.choices.forEach((c, i) => {
    const btn = document.createElement('button');
    btn.className = 'choice';
    btn.type = 'button';
    btn.innerHTML = `<strong>${String.fromCharCode(65+i)}.</strong> ${c}`;
    btn.dataset.index = i;
    btn.addEventListener('click', onChoose);
    choicesEl.appendChild(btn);
  });
  status.textContent = `問題 ${idx+1} / ${total}`;
  progBar.style.width = `${Math.round((idx/total)*100)}%`;
  nextBtn.disabled = true;
  feedback.textContent = '';
  answered = false;
}

function onChoose(e) {
  if (answered) return;
  answered = true;
  const chosen = Number(e.currentTarget.dataset.index);
  const item = QUESTIONS[idx];
  const correctIndex = item.a;
  const choiceButtons = [...choicesEl.querySelectorAll('.choice')];
  choiceButtons.forEach((b)=>{ b.disabled = true; });

  if (chosen === correctIndex) {
    e.currentTarget.classList.add('correct');
    score += 1;
    feedback.textContent = '正解！';
  } else {
    e.currentTarget.classList.add('wrong');
    // 正解表示
    const correctBtn = choiceButtons.find(b => Number(b.dataset.index) === correctIndex);
    if (correctBtn) correctBtn.classList.add('correct');
    feedback.textContent = '不正解。';
  }

  // 説明文を下に追加
  const explain = document.createElement('div');
  explain.style.marginTop = '12px';
  explain.style.color = 'var(--muted)';
  explain.textContent = '【解説】' + item.explain || '';
  document.querySelector('.question').appendChild(explain);

  nextBtn.disabled = false;
}

nextBtn.addEventListener('click', ()=>{
  if (!answered) return;
  idx += 1;
  if (idx >= total) {
    showResult();
  } else {
    // remove previous explanation if any
    const prevExplain = document.querySelector('.question > div[style]');
    if (prevExplain) prevExplain.remove();
    renderQuestion();
  }
});

function showResult() {
  progBar.style.width = '100%';
  document.getElementById('quizArea').style.display = 'none';
  resultBox.classList.add('show');
  finalScore.textContent = `あなたのスコア: ${score} / ${total}`;
  const rate = Math.round((score/total)*100);
  detailText.textContent = `正答率 ${rate}% — ` + (
    rate >= 80 ? '素晴らしい！ 基礎はしっかりしています。' :
    rate >= 60 ? 'まずまずです。苦手な部分を復習しましょう。' :
    '復習をおすすめします。用語や指標の意味を確認しましょう。'
  );
}

restartBtn.addEventListener('click', ()=>{
  // リスタート時は問題を再シャッフルして再選択
  resetQuiz(true);
});
retryBtn.addEventListener('click', ()=>{
  // リトライ時も問題を再シャッフルして再選択
  resetQuiz(true);
});
reviewBtn.addEventListener('click', ()=>{
  // シンプルなレビュー: 全問題と解説を表示
  let rev = '--- 出題された50問の解説一覧 ---\n\n';
  QUESTIONS.forEach((q,i)=>{
    rev += `${i+1}. ${q.q}\n正解: ${String.fromCharCode(65+q.a)}. ${q.choices[q.a]}\n【解説】: ${q.explain || ''}\n\n`;
  });
  alert(rev);
});

function resetQuiz(shouldReshuffle = false) {
  if (shouldReshuffle) {
    // 再シャッフルとランダム選択を実行
    shuffleArray(ALL_QUESTIONS);
    QUESTIONS.splice(0, QUESTIONS.length, ...ALL_QUESTIONS.slice(0, 50));
  }
  
  idx = 0; score = 0; answered = false;
  document.getElementById('quizArea').style.display = '';
  resultBox.classList.remove('show');
  // clear any leftover explain
  const prevExplain = document.querySelector('.question > div[style]');
  if (prevExplain) prevExplain.remove();
  renderQuestion();
}

// 初期化（初回もシャッフルして50問選択）
renderQuestion();
</script>
</body>
</html>